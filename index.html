<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday T Santhiya!</title> <!-- Title பெயர் மாற்றம் -->

    <!-- Google Font: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@1,100;1,400;1,700&display=swap" rel="stylesheet">

    <!-- Canvas Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <!-- Embedded CSS -->
    <style>
        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center vertically */
            align-items: center; /* Center horizontally */
            min-height: 100vh;
            /* Changed Body Background to Blue/Purple Gradient */
            background: linear-gradient(to bottom right, #e3f2fd, #bbdefb, #d1c4e9, #b39ddb); /* Light Blue -> Medium Blue -> Light Purple -> Medium Purple */
            perspective: 1000px; /* For 3D effect */
            overflow: hidden; /* Prevent overflow */
            font-family: 'Poppins', sans-serif;
            position: relative; /* Needed for particle canvas and footer positioning */
            padding-bottom: 30px; /* Add padding at the bottom to make space for the footer */
            box-sizing: border-box; /* Include padding in height calculation */
        }

        /* Particle Canvas for Body Background */
        #particleCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; /* Behind everything */
            pointer-events: none; /* Allow clicks to pass through to card */
        }


        .card-container {
            width: 300px; /* Adjust card size as needed */
            height: 450px; /* Adjust card size as needed */
            position: relative;
            cursor: pointer; /* Indicates clickable for flip */
            transition: transform 0.8s; /* Smooth transition on hover/interaction */
            /* Animated Border */
            border-radius: 15px; /* Match card face border-radius */
            overflow: hidden; /* Hide the moving gradient overflow */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); /* Keep container shadow */
            z-index: 0; /* Ensure card is above base background and particles */
            flex-shrink: 0; /* Prevent card from shrinking */
            margin-top: auto;
            margin-bottom: auto; /* Helps center vertically with flex column */
        }

        /* Animated Border Pseudo-element */
        .card-container::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            z-index: -1;
            /* Changed Animated Border Gradient to Blue/Purple Shades */
            background: linear-gradient(45deg, #42a5f5, #7b1fa2, #bbdefb, #5c6bc0); /* Blue, Purple, Light Blue, Indigo */
            background-size: 400% 400%;
            animation: moveGradient 10s linear infinite;
            border-radius: 18px;
            pointer-events: none;
        }

        @keyframes moveGradient {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }


        /* Optional hover effect on container */
        .card-container:hover {
            transform: scale(1.03);
        }

        .card-wrapper {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Flip transition */
             z-index: 1;
        }

        .card-wrapper.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            width: 100%;
            height: 100%;
            position: absolute;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            overflow: hidden;
        }

        .card-front {
            /* Changed Front Background to Blue/Light Blue */
            background: linear-gradient(to top left, #bbdefb, #e3f2fd); /* Light Blue -> Very Light Blue */
            color: #4a148c; /* Deep purple text - kept this as it fits */
            z-index: 2;
            transform: rotateY(0deg);
        }

        .card-back {
            /* Changed Inside Background to Very Light Purple/Blue */
            background: linear-gradient(to bottom right, #ede7f6, #e3f2fd); /* Very Light Purple -> Very Light Blue */
            color: #5d4037; /* Brownish text - kept this as it contrasts */
            transform: rotateY(180deg);
            text-align: center;
            justify-content: flex-start;
            padding-top: 40px;
            gap: 20px;
            z-index: 1;
        }

        h1, h2 {
            margin: 5px 0;
            font-weight: 100;
            font-style: italic;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            position: relative;
            display: inline-block;
            color: #7b1fa2; /* Purple heading color - kept this */
        }

        /* Shimmer Effect (on text) */
        .shimmer {
            position: relative;
            display: inline-block;
            overflow: hidden;
        }

        .shimmer::before {
            content: '';
            position: absolute;
            top: 0;
            left: -150%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.3) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: skewX(-20deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -150%; }
            50% { left: 150%; }
            100% { left: -150%; }
        }

        .cake {
            width: 60%;
            height: auto;
            margin-top: 20px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .cake:hover {
            transform: scale(1.05) rotate(-3deg);
        }

        .balloons-container {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            display: flex;
            justify-content: space-around;
            padding: 0 30px;
            box-sizing: border-box;
        }

        .balloon {
            width: 30px;
            height: 40px;
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            opacity: 1;
            transition: transform 0.3s ease, opacity 0.3s ease;
            box-shadow: inset -5px -5px 5px rgba(0,0,0,0.1);
        }

        /* Updated Balloon Colors to match Blue/Purple Theme */
        .balloon[data-color="red"] { background-color: #ab47bc; } /* Purple */
        .balloon[data-color="blue"] { background-color: #42a5f5; } /* Keep Blue */
        .balloon[data-color="green"] { background-color: #bbdefb; } /* Light Blue */
        .balloon[data-color="yellow"] { background-color: #5c6bc0; } /* Indigo/Blue-Purple */

        .balloon::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 20px;
            background-color: rgba(0, 0, 0, 0.3);
        }

        .balloon:hover {
            transform: translateY(-5px) scale(1.1);
        }

        /* Pop animation class */
        .balloon.popped {
            animation: pop 0.3s ease-out forwards;
            opacity: 0;
        }

        @keyframes pop {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.5;}
            100% { transform: scale(0); opacity: 0; }
        }

        .instruction {
            position: absolute;
            bottom: 15px;
            width: 100%;
            text-align: center;
            font-size: 0.9em;
            color: rgba(0, 0, 0, 0.5);
            font-weight: 400;
        }

        .card-back .instruction {
            bottom: 15px;
        }

        .inside-message {
            margin: 0;
            font-size: 1em;
            line-height: 1.6;
            font-weight: 400;
            font-style: italic;
            color: #5d4037;
            width: 100%;
            padding: 0 10px;
        }

        .gift-box {
            font-size: 4em;
            cursor: pointer;
            transition: transform 0.3s ease;
            line-height: 1;
        }

        .gift-box:hover {
            transform: scale(1.1) rotate(5deg);
        }

        /* Make sure clickable items have pointer cursor */
        .cake, .balloon, .gift-box {
            cursor: pointer;
        }

        /* Optional: Disable pointer events on the faces during flip animation */
        .card-face {
             pointer-events: auto;
        }

        /* --- Footer Styles --- */
        footer {
            position: absolute;
            bottom: 10px;
            width: 100%;
            text-align: center;
            font-size: 0.8em;
            color: rgba(0, 0, 0, 0.4);
            font-weight: 400;
            z-index: 10;
        }

        footer a {
             color: rgba(0, 0, 0, 0.6);
             text-decoration: none;
             font-weight: 600;
             transition: color 0.3s ease;
        }

        footer a:hover {
             color: rgba(0, 0, 0, 0.8);
             text-decoration: underline;
        }


    </style>
</head>
<body>

    <!-- Particle Canvas -->
    <canvas id="particleCanvas"></canvas>

    <div class="card-container" id="cardContainer">
        <div class="card-wrapper" id="cardWrapper">
            <div class="card-face card-front" id="cardFront">
                <h1 class="shimmer">Happy Birthday</h1>
                <h2 class="shimmer">T Santhiya!</h2> <!-- Updated Name -->
                <!-- Updated Cake Image URL (kept same image) -->
                <img src="https://assets.onecompiler.app/3zky9aw9p/43kjab4wq/%E2%80%94Pngtree%E2%80%94birthday%20cake%203d_16787458.png" alt="Birthday Cake" class="cake" id="cake">
                <div class="balloons-container">
                    <!-- Data-color attributes are used in JS/CSS for color assignment -->
                    <div class="balloon" data-color="red"></div> <!-- Now visually purple via CSS -->
                    <div class="balloon" data-color="blue"></div> <!-- Still visually blue -->
                    <div class="balloon" data-color="green"></div> <!-- Now visually light blue via CSS -->
                    <div class="balloon" data-color="yellow"></div> <!-- Now visually indigo/blue-purple via CSS -->
                </div>
                <p class="instruction">Click anywhere to open!</p>
            </div>
            <div class="card-face card-back" id="cardBack">
                <p class="inside-message">
                     T Santhiya,<br><br> <!-- Updated Name -->
                    Entha pulliku Nalla Buthiya Kudu Kadavale  Mm Happy Birthday <br><br>
                    With Developer,<br>
                    [EVS]
                </p>
                <div class="gift-box" id="giftBox">
                    🎁
                </div>
                <p class="instruction">Click the gift!</p>
            </div>
        </div>
    </div>

    <!-- Sound Effects (Remember to replace src with actual paths!) -->
    <audio id="flipSound" src="path/to/flip.mp3" preload="auto"></audio>
    <audio id="confettiSound" src="path/to/confetti.mp3" preload="auto"></audio>
    <audio id="popSound" src="path/to/pop.mp3" preload="auto"></audio>
    <audio id="surpriseSound" src="path/to/surprise.mp3" preload="auto"></audio>

    <!-- Embedded JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cardContainer = document.getElementById('cardContainer');
            const cardWrapper = document.getElementById('cardWrapper');
            const cardFront = document.getElementById('cardFront');
            const cardBack = document.getElementById('cardBack');
            const cake = document.getElementById('cake');
            const balloons = document.querySelectorAll('.balloon');
            const giftBox = document.getElementById('giftBox');
            const particleCanvas = document.getElementById('particleCanvas');
            const ctx = particleCanvas.getContext('2d');

            // Sound elements
            const flipSound = document.getElementById('flipSound');
            const confettiSound = document.getElementById('confettiSound');
            const popSound = document.getElementById('popSound');
            const surpriseSound = document.getElementById('surpriseSound');

            let isFlipped = false;
            let isAnimating = false;

            // --- Particle Animation ---
            let particles = [];
            const particleCount = 50;

            // Resize canvas when window is resized
            function resizeCanvas() {
                particleCanvas.width = window.innerWidth;
                particleCanvas.height = window.innerHeight;
            }

            // Particle class
            function Particle(x, y, size, speedY, color) {
                this.x = x;
                this.y = y;
                this.size = size;
                this.speedY = speedY;
                this.color = color;
                this.speedX = (Math.random() - 0.5) * 0.5;

                this.update = function() {
                    this.y += this.speedY;
                    this.x += this.speedX;
                    if (this.y < -this.size) {
                         this.y = particleCanvas.height + this.size;
                         this.x = Math.random() * particleCanvas.width;
                         this.size = Math.random() * 3 + 1;
                         this.speedY = Math.random() * -0.5 - 0.2;
                         this.speedX = (Math.random() - 0.5) * 0.5;
                     }
                }

                this.draw = function() {
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            // Initialize particles - Updated colors to match new theme
            function initParticles() {
                 particles = [];
                 const colors = ['#42a5f5', '#7b1fa2', '#bbdefb', '#d1c4e9', '#5c6bc0']; // Blue, Purple, Light Blue, Light Purple, Indigo
                for (let i = 0; i < particleCount; i++) {
                    const size = Math.random() * 3 + 1;
                    const x = Math.random() * particleCanvas.width;
                    const y = Math.random() * particleCanvas.height;
                    const speedY = Math.random() * -0.5 - 0.2;
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    particles.push(new Particle(x, y, size, speedY, color));
                }
            }

            // Animation loop for particles
            function animateParticles() {
                ctx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
                for (let i = 0; i < particles.length; i++) {
                    particles[i].update();
                    particles[i].draw();
                }
                requestAnimationFrame(animateParticles);
            }

            // Event listener for window resize
            window.addEventListener('resize', resizeCanvas);

            // --- Card Flip Toggle ---
             cardContainer.addEventListener('click', () => {
                if (!isAnimating) {
                    isAnimating = true;
                    cardFront.style.pointerEvents = 'none';
                    cardBack.style.pointerEvents = 'none';

                    if (isFlipped) {
                        cardWrapper.classList.remove('flipped');
                        playAudio(flipSound);
                    } else {
                        cardWrapper.classList.add('flipped');
                         playAudio(flipSound);
                    }
                }
            });

            // Listener for when the flip animation ends
            cardWrapper.addEventListener('transitionend', (event) => {
                 if (event.propertyName === 'transform') {
                     isAnimating = false;
                     cardFront.style.pointerEvents = 'auto';
                     cardBack.style.pointerEvents = 'auto';
                     isFlipped = cardWrapper.classList.contains('flipped');

                     if (!isFlipped) {
                         balloons.forEach(balloon => {
                             balloon.classList.remove('popped');
                             balloon.style.visibility = 'visible';
                         });
                     }
                 }
            });


            // --- Cake Confetti ---
            cake.addEventListener('click', (event) => {
                 if (!isFlipped && !isAnimating) {
                     triggerConfetti(event);
                     playAudio(confettiSound);
                 }
                 event.stopPropagation();
            });

            // Function to trigger canvas-confetti - Updated colors to match new theme
            function triggerConfetti(event) {
                 const x = event.clientX / window.innerWidth;
                 const y = event.clientY / window.innerHeight;

                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { x: x, y: y },
                    gravity: 0.8,
                    scalar: 0.9,
                    zIndex: 9999,
                    // Updated Confetti colors
                    colors: ['#ab47bc', '#42a5f5', '#bbdefb', '#5c6bc0', '#7b1fa2', '#d1c4e9']
                });
            }

            // --- Balloon Pop Confetti ---
            balloons.forEach(balloon => {
                balloon.addEventListener('click', (event) => {
                     if (!isFlipped && !isAnimating && !balloon.classList.contains('popped')) {
                        triggerBalloonConfetti(balloon);
                        playAudio(popSound);

                        balloon.classList.add('popped');
                         setTimeout(() => {
                             balloon.style.visibility = 'hidden';
                         }, 300);

                        event.stopPropagation();
                     }
                });
            });

            // Function to trigger localized confetti for balloon pop - Updated colors to match new theme
            function triggerBalloonConfetti(balloon) {
                const rect = balloon.getBoundingClientRect();
                const x = (rect.left + rect.width / 2) / window.innerWidth;
                const y = (rect.top + rect.height / 2) / window.innerHeight;

                confetti({
                    particleCount: 30,
                    spread: 50,
                    origin: { x: x, y: y },
                    gravity: 0.7,
                    scalar: 0.7,
                    zIndex: 9999,
                    // Updated Balloon Confetti colors
                    colors: ['#ab47bc', '#42a5f5', '#bbdefb', '#5c6bc0']
                });
            }

            // --- Gift Box Redirect ---
            giftBox.addEventListener('click', (event) => {
                if (isFlipped && !isAnimating) {
                    playAudio(surpriseSound);

                    const redeemUrl = 'https://play.google.com/redeem?code=AL7JHW2MWYPG7VE0';
                    window.open(redeemUrl, '_blank');
                }
                event.stopPropagation();
            });

            // --- Audio Playback ---
            function playAudio(audioElement) {
                if (audioElement) {
                    audioElement.currentTime = 0;
                    audioElement.play().catch(error => {
                        console.warn(`Audio playback blocked or failed for ${audioElement.id}:`, error);
                        console.warn("User interaction might be needed to enable sound.");
                    });
                } else {
                    console.warn("Audio element not found or not provided.");
                }
            }

            // --- Initialization ---
            resizeCanvas();
            initParticles();
            animateParticles();

        });
    </script>

    <!-- --- Footer Section --- -->
    <footer>
        <p>Created by <a href="https://evanjeevan07.github.io/Me/" target="_blank" rel="noopener noreferrer">[EVS]</a></p>
    </footer>

</body>
</html>
